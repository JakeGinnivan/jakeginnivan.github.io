
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>BDDfy v4.0 Examples Support - Jake Ginnivan's blog</title>
  <meta name="author" content="Jake Ginnivan">

  
  <meta name="description" content="One of the major features in BDDfy v4 is the inclusion of examples Scenario: Successful rail card purchases
Given: the buyer is a &lt;buyer category& &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jake.ginnivan.net/blog/2014/05/05/bddfy-examples-support/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/feed" rel="alternate" title="Jake Ginnivan's blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42948513-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Jake Ginnivan's blog</a></h1>
  
  <ul class="social-links">
  
    <li><a class="feed" href="/feed" title="RSS"></a></li>
  
  
    <li><a class="twitter" href="http://twitter.com/JakeGinnivan" title="Twitter" target="_black"></a></li>
  
  
    <li><a class="github" href="https://github.com/JakeGinnivan" title="GitHub" target="_black"></a></li>
  
</ul>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/feed" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jake.ginnivan.net" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about-me">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">BDDfy v4.0 Examples Support</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-05-05T17:09:00+01:00" pubdate data-updated="true">May 5<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>One of the major features in BDDfy v4 is the inclusion of examples</p>

<p><strong>Scenario:</strong> Successful rail card purchases<br/>
<strong>Given:</strong> the buyer is a <em>&lt;buyer category&gt;</em><br/>
<strong>And:</strong> the buyer selects a <em>&lt;fare&gt;</em><br/>
<strong>When:</strong> the buyer pays<br/>
<strong>Then:</strong> a sale occurs with an amount of <em>&lt;price&gt;</em></p>

<p>Examples:</p>

<pre><code>| Buyer Category | Fare          | Price |
| Student        | Monthly Pass  | $76   |
| Senior         | Monthly Pass  | $98   |
| Standard       | Monthly Pass  | $146  |
| Student        | Weekly Pass   | $23   |
| Senior         | Weekly Pass   | $30   |
| Standard       | Weekly Pass   | $44   |
| Student        | Day Pass      | $4    |
| Senior         | Day Pass      | $5    |
| Standard       | Day Pass      | $7    |
| Student        | Single Ticket | $1.5  |
| Senior         | Single Ticket | $2    |
| Standard       | Single Ticket | $3    |
</code></pre>

<p>This is an example of a Cucumber test with examples, for each row in the examples table the test will run effectively giving us a data driven BDD style test.</p>

<p>I have picked this test because it is a bit more complex than the standard <code>Given I have 3 beers in my fridge, When I drink 2, Then I have 1 beer left</code>.. Yay, how interesting..</p>

<p>In this example, I will use BDDfy&rsquo;s fluent API to write this test. First without examples:</p>

<pre><code>this.Given(_ =&gt; TheBuyerIsA(BuyerCategory.Student))
    .And(_ =&gt; TheBuyerSelectsA(new MonthlyPass()))
    .When(_ =&gt; TheBuyerPays())
    .Then(_ =&gt; ASaleOccursWithAnAmountOf(new Money(76)))
    .BDDfy("Successful rail card purchases");
</code></pre>

<p>Which gives us a nicely formatted output of</p>

<pre><code>Scenario: Successful rail card purchases
  The buyer is a Student
    The buyer selects a Monthly Pass
  The buyer pays
  A sale occurs with an amount of $76.00
</code></pre>

<p>The next step is to turn this into a test with examples.</p>

<h3>Step 1</h3>

<p>Create somewhere to put the examples, BDDfy supports private/public fields and properties as well as local variables in your test method. The following all work:</p>

<pre><code>private Fare fare;
private BuyerCategory _buyerCategory;
public Money Price { get; set; }

public void MyTest()
{
      var Fare = default(Fare);
}
</code></pre>

<p>Local variables are the cleanest and recommended approach, but feel free to use fields or properties when examples are shared between tests.</p>

<h3>Step 2</h3>

<p>Then we should replace the arguments we are passing to our steps to be the fields/properties</p>

<pre><code>var buyerCategory = default(BuyerCategory);
var fare = default(Fare);
var price = default(Money);

this.Given(_ =&gt; TheBuyerIsA(buyerCategory))
    .And(_ =&gt; TheBuyerSelectsA(fare))
    .When(_ =&gt; TheBuyerPays())
    .Then(_ =&gt; ASaleOccursWithAnAmountOf(Price))
    .BDDfy("Successful rail card purchases");
</code></pre>

<h3>Step 3</h3>

<p>Use the .WithExamples() extension method to pass your examples to BDDfy</p>

<pre><code>this.Given(_ =&gt; TheBuyerIsA(buyerCategory))
    .And(_ =&gt; TheBuyerSelectsA(fare))
    .When(_ =&gt; TheBuyerPays())
    .Then(_ =&gt; ASaleOccursWithAnAmountOf(price))
    .WithExamples(new ExampleTable(
        "Buyer Category", "Fare", "Price")
    {
        { BuyerCategory.Student, new MonthlyPass(), new Money(76) },
        { BuyerCategory.Senior, new MonthlyPass(), new Money(98) },
        { BuyerCategory.Standard, new MonthlyPass(), new Money(146) },
        { BuyerCategory.Student, new WeeklyPass(), new Money(23) },
        { BuyerCategory.Senior, new WeeklyPass(), new Money(30) },
        { BuyerCategory.Standard, new WeeklyPass(), new Money(44) },
        { BuyerCategory.Student, new DayPass(), new Money(4) },
        { BuyerCategory.Senior, new DayPass(), new Money(5) },
        { BuyerCategory.Standard, new DayPass(), new Money(7) },
        { BuyerCategory.Student, new SingleTicket(), new Money(1.5m) },
        { BuyerCategory.Senior, new SingleTicket(), new Money(2m) },
        { BuyerCategory.Standard, new SingleTicket(), new Money(3m) }
    })
    .BDDfy("Successful rail card purchases");
</code></pre>

<p>BDDfy supports two ways of providing examples, if you are migrating from SpecFlow and you are using simple types (unlike the example above where my examples are actually classes) then we support the normal text table:</p>

<pre><code>.WithExamples(@"
    | Header 1 | Header 2     | Header3    |
    | Value 1  | 2            | 3          |
    |          | 14 Mar 2010  | Transition |");
</code></pre>

<h3>Step 4</h3>

<p>Thats it, simply run your tests and the output will be something like this:</p>

<pre><code>Scenario: Successful rail card purchases
  The buyer is a &lt;Buyer Category&gt;        
    The buyer selects a &lt;Fare&gt;           
  The buyer pays                         
  A sale occurs with an amount of &lt;Price&gt;

Examples: 
| Buyer Category | Fare         | Price   |
| Student        | Monthly Pass | $76.00  |
| Senior         | Monthly Pass | $98.00  |
| Standard       | Monthly Pass | $146.00 |
| Student        | Weekly Pass  | $23.00  |
| Senior         | Weekly Pass  | $30.00  |
| Standard       | Weekly Pass  | $44.00  |
| Student        | Day Pass     | $4.00   |
| Senior         | Day Pass     | $5.00   |
| Standard       | Day Pass     | $7.00   |
| Student        | Day Pass     | $1.50   |
| Senior         | Day Pass     | $2.00   |
| Standard       | Day Pass     | $3.00   |
</code></pre>

<p>Errors will be reported against examples rather than steps when examples are used. For example:</p>

<pre><code>Examples: 
| Buyer Category | Fare         | Price   | Error                                                  |
| Student        | Monthly Pass | $76.00  |                                                        |
| Senior         | Monthly Pass | $98.00  |                                                        |
| Standard       | Monthly Pass | $146.00 |                                                        |
| Student        | Weekly Pass  | $23.00  | ChuckedAWobblyException: $24 should be $23 [Details 1] |
| Senior         | Weekly Pass  | $30.00  |                                                        |
| Standard       | Weekly Pass  | $44.00  |                                                        |
| Student        | Day Pass     | $4.00   |                                                        |
| Senior         | Day Pass     | $5.00   |                                                        |
| Standard       | Day Pass     | $7.00   |                                                        |
| Student        | Day Pass     | $1.50   |                                                        |
| Senior         | Day Pass     | $2.00   |                                                        |
| Standard       | Day Pass     | $3.00   |                                                        |

Exceptions:
1. ChuckedAWobblyException: $24 should be $23
&lt;stacktrace&gt;
</code></pre>

<p>This works with all of our built in reports. If you have custom reports then you will get a test for <em>each</em> example. Have a look at the built in reporters for examples on how to build custom reporters with examples support.</p>

<h2>Other things to note</h2>

<h3>Step names</h3>

<p>There are multiple ways to put placeholders in step names, the one shown above allows you to simply use the parameter on the step method. If it matches a column in your example table it will be substituted in the step name. If it doesn&rsquo;t match you will just get the value like you currently do.</p>

<p>We also support the following:</p>

<pre><code>GivenIHave__initialCount__Beers() # Then access the value from a field/property directly in the step
.Given(_ =&gt; InitialCount(), "Given I have &lt;initial count&gt; beers")
</code></pre>

<p>If you have more ideas on how we could make this even better, let us know!</p>

<h3>Errors</h3>

<p>BDDfy will try it&rsquo;s best to tell you when something is wrong, for example your test will fail if examples in your example table are not put anywhere. This is handy when you make a spelling mistake or refactor things and they no longer match.
We will also give you row and column information of values if they cannot be assigned, for example trying to assign &lsquo;null&rsquo; to a value type.</p>

<p>I really hope you enjoy using this feature, we have wanted to add this to BDDfy for a long time but it is a pretty massive feature so it has taken us a while. We also not only wanted to make it as good as the Gherkin first languages, but take advantage of the fact that BDDfy tests are written in code to allow complex types to be used in examples.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jake Ginnivan</span></span>

      








  


<time datetime="2014-05-05T17:09:00+01:00" pubdate data-updated="true">May 5<span>th</span>, 2014</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://jake.ginnivan.net/blog/2014/05/05/bddfy-examples-support/" data-via="JakeGinnivan" data-counturl="http://jake.ginnivan.net/blog/2014/05/05/bddfy-examples-support/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/01/14/nunit-263-async-and-dotnet40-broken/" title="Previous Post: nUnit 2.6.3, async and .net 4.0 broken">&laquo; nUnit 2.6.3, async and .net 4.0 broken</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/05/08/bddfy-v4-beta1/" title="Next Post: BDDfy v4.0 Beta 1 Released">BDDfy v4.0 Beta 1 Released &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/05/08/bddfy-v4-beta1/">BDDfy v4.0 Beta 1 Released</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/05/05/bddfy-examples-support/">BDDfy v4.0 Examples Support</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/14/nunit-263-async-and-dotnet40-broken/">nUnit 2.6.3, async and .net 4.0 broken</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/10/on-async-and-sync-contexts/">On Async and Sync Contexts</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/01/05/blog-migration/">Blog Migration</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
  <div id="category-buttons-list"><div class="category-button"><a href="/blog/categories/dot-net/">.NET</a><span class="category-count">6</span></div><div class="category-button"><a href="/blog/categories/async/">Async</a><span class="category-count">3</span></div><div class="category-button"><a href="/blog/categories/async/">async</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/automapper/">AutoMapper</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/azure/">Azure</a><span class="category-count">3</span></div><div class="category-button"><a href="/blog/categories/clickonce/">ClickOnce</a><span class="category-count">3</span></div><div class="category-button"><a href="/blog/categories/continuous-delivery/">Continuous Delivery</a><span class="category-count">2</span></div><div class="category-button"><a href="/blog/categories/git/">Git</a><span class="category-count">3</span></div><div class="category-button"><a href="/blog/categories/gitflow/">GitFlow</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/github/">GitHub</a><span class="category-count">3</span></div><div class="category-button"><a href="/blog/categories/jira/">Jira</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/log4net/">log4net</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/msbuild/">MSBuild</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/nuget/">NuGet</a><span class="category-count">3</span></div><div class="category-button"><a href="/blog/categories/open-source/">Open Source</a><span class="category-count">20</span></div><div class="category-button"><a href="/blog/categories/presenting/">Presenting</a><span class="category-count">8</span></div><div class="category-button"><a href="/blog/categories/resharper/">ReSharper</a><span class="category-count">2</span></div><div class="category-button"><a href="/blog/categories/semantic-versioning/">Semantic Versioning</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/teamcity/">TeamCity</a><span class="category-count">5</span></div><div class="category-button"><a href="/blog/categories/testing/">Testing</a><span class="category-count">5</span></div><div class="category-button"><a href="/blog/categories/teststack/">TestStack</a><span class="category-count">2</span></div><div class="category-button"><a href="/blog/categories/tfs/">TFS</a><span class="category-count">2</span></div><div class="category-button"><a href="/blog/categories/ui-automation/">UI Automation</a><span class="category-count">6</span></div><div class="category-button"><a href="/blog/categories/vsto/">VSTO</a><span class="category-count">17</span></div><div class="category-button"><a href="/blog/categories/webapi/">WebApi</a><span class="category-count">1</span></div><div class="category-button"><a href="/blog/categories/white/">White</a><span class="category-count">2</span></div><div class="category-button"><a href="/blog/categories/windows-phone/">Windows Phone</a><span class="category-count">9</span></div><div class="category-button"><a href="/blog/categories/wpf/">Wpf</a><span class="category-count">8</span></div></ul>
</section>
<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/JakeGinnivan">@JakeGinnivan</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'JakeGinnivan',
            count: 6,
            skip_forks: false,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Jake Ginnivan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
  - <span class="credit">Theme by <a href="http://www.gehaxelt.in">Gehaxelt</a></span>
  <span class="credit">and <a href="http://www.it-solutions-neef.de">IT Solutions Neef</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jakeginnivansblog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jake.ginnivan.net/blog/2014/05/05/bddfy-examples-support/';
        var disqus_url = 'http://jake.ginnivan.net/blog/2014/05/05/bddfy-examples-support/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
